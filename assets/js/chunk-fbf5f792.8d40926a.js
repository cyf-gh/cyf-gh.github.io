(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-fbf5f792"],{4582:function(e,t,a){"use strict";var r=a("9502"),s=a("abaf"),i=a("6f14"),c=a("1289"),n=a("7562"),l=a("d9ee"),o=a("bc22"),d=a("09bc"),u=a("54f5"),g=a("6015"),f=a("2c5e"),h=a("900d").f,p=a("63f0").f,b=a("71fb").f,v=a("5877"),m=a("fc1e").trim,P=(a="Number",s[a]),_=P.prototype,w=s.TypeError,S=i("".slice),k=i("".charCodeAt),x=function(e){var t,a,r,s,i,c,n,l=g(e,"number");if(u(l))throw w("Cannot convert a Symbol value to a number");if("string"==typeof l&&2<l.length)if(l=m(l),43===(e=k(l,0))||45===e){if(88===(t=k(l,2))||120===t)return NaN}else if(48===e){switch(k(l,1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+l}for(i=(s=S(l,2)).length,c=0;c<i;c++)if((n=k(s,c))<48||r<n)return NaN;return parseInt(s,a)}return+l};if(c(a,!P(" 0o1")||!P("0b1")||P("+0x1"))){for(var C,I=function(e){e=arguments.length<1?0:P(function(e){return e=g(e,"number"),"bigint"==typeof e?e:x(e)}(e));var t=this;return d(_,t)&&f((function(){v(t)}))?o(Object(e),t,I):e},M=r?h(P):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),y=0;M.length>y;y++)l(P,C=M[y])&&!l(I,C)&&b(I,C,p(P,C));n(s,a,(I.prototype=_).constructor=I,{constructor:!0})}},5877:function(e,t,a){a=a("6f14"),e.exports=a(1..valueOf)},"69ee":function(e,t,a){"use strict";a.r(t),a("8300"),a("eba8"),a("60fe"),a("7241"),a("7141"),a("6fff"),a("4462"),a("2ce8"),a("af03"),a("274a"),a("4582");var r=a("df25"),s=a("3f9d"),i=a("44aa"),c=a("69a7");r={mounted:function(){try{i.a.InitToast(this.$bvToast),this.updateFeedSource();var e=localStorage.getItem("selectedPlgs");this.selectedPlgs=null==e?[]:JSON.parse(e),this.scr.mcdrPath=localStorage.getItem("mcdrPath")}catch(e){}e=localStorage.getItem("mcdrplguuid"),null==e&&(e=c.a.CreateUuid().toString(),localStorage.setItem("mcdrplguuid",e)),this.uuid=e;try{this.getscr(),this.runScript+=this.uuid+")"}catch(e){}},data:function(){return{feed:[],curPlgItems:[],selectedPlgs:[],curPage:1,perPage:5,curPage2:1,perPage2:7,selectMode:"multi",curCatName:"",fields:["name","desc"],feedSource:"https://se.cyf-cloud.cn:2346/v1/util/mcdr/plg/feed",view:{tCount:0},scr:{mcdrPath:"",clearOriginPlgs:!0,src:"",info:""},validate:{dig1:0,dig2:0,sum:0},uuid:"",runScript:". <(curl -s -S -L https://api.cyf-cloud.cn/v1/util/mcdr/plg/scripts?u="}},methods:{createscr:function(){var e=this;this.scrPathState?this.validateAnswer?this.axios.post(s.a+"/v1/util/mcdr/plg/script/generate",this.selectedPlgs,{params:{u:this.uuid,clear:this.scr.clearOriginPlgs,path:this.scr.mcdrPath}}).then((function(t){"OK"==t.data&&(i.a.Msg("提示","成功生成脚本，请复制命令至终端继续。","success"),e.getscr())})).catch((function(e){i.a.Msg("错误","请查看控制条","danger")})):i.a.Msg("错误","验证问题错误","danger"):i.a.Msg("错误","路径未填写正确","danger")},getscr:function(){var e=this;this.axios.get(s.a+"/v1/util/mcdr/plg/scripts",{params:{u:this.uuid}}).then((function(t){e.scr.src=t.data,""==e.scr.src?i.a.Msg("提示","你还未生成过脚本"):i.a.Msg("提示","成功获取脚本","success")})).catch((function(e){i.a.Msg("错误","获取脚本失败","danger")}))},updateFeedSource:function(){var e=this;this.axios.get(this.feedSource).then((function(t){e.feed=t.data,0==e.feed.length&&i.a.Msg("提示","插件源中没有任何插件"),e.curPlgItems=e.feed[0].plg,i.a.Msg("提示","插件源更新成功")})).catch((function(e){i.a.Msg("提示","源获取失败，请更换源","danger")}))},selectChanged:function(){},onRowSelected:function(e){var t=this,a=!1,r=0;this.selectedPlgs.forEach((function(s){if(s.name==e.name)return t.$delete(t.selectedPlgs,r),void(a=!0);r++})),a||(this.selectedPlgs.push(e),this.saveSelectedPlg())},onSelectedPlgCliced:function(e){for(var t in this.selectedPlgs)if(this.selectedPlgs[t].name==e.name)return this.$delete(this.selectedPlgs,t),void this.saveSelectedPlg()},msg:function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"default";this.view.tCount++,this.$bvToast.toast(t,{title:e,autoHideDelay:3e3,appendToast:!1,variant:a})},saveSelectedPlg:function(){localStorage.setItem("selectedPlgs",JSON.stringify(this.selectedPlgs))},saveMCDRPath:function(){localStorage.setItem("mcdrPath",this.scr.mcdrPath)},openCreatescr:function(){this.validate.dig1=c.a.noncestr(!0,1,2),this.validate.dig2=c.a.noncestr(!0,1,2),this.validate.sum=0,this.$refs.modalCreatescr.show()}},computed:{rows:function(){return this.curPlgItems.length},rows2:function(){return this.selectedPlgs.length},scrPathState:function(){var e=new RegExp("/|(/[a-zA-Z0-9_-]+)+"),t=e.test(this.scr.mcdrPath);return e.test(this.scr.mcdrPath)&&this.saveMCDRPath(),t},validateAnswer:function(){return this.validate.sum==Number(this.validate.dig1)+Number(this.validate.dig2)}},components:{ccMentionDeprecated:r.a}},a=a("cba8"),a=Object(a.a)(r,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("div",[t("ccMentionDeprecated"),t("b-modal",{ref:"modalCreatescr",attrs:{id:"id-modal-create-scr",title:"还剩几步完成脚本的生成"},on:{ok:e.createscr}},[t("label",{attrs:{for:"id-input-mcdr-path"}},[e._v("MCDR位于服务器的绝对路径")]),t("b-form-input",{attrs:{id:"id-input-mcdr-path",required:"",state:e.scrPathState,placeholder:"Unix路径","invalid-feedback":"不能为空","aria-describedby":"input-live-help input-live-feedback"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createscr.apply(null,arguments)}},model:{value:e.scr.mcdrPath,callback:function(t){e.$set(e.scr,"mcdrPath",t)},expression:"scr.mcdrPath"}}),t("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[e._v(" 请输入正确的Unix路径 ")]),t("b-form-text",{attrs:{id:"id-input-mcdr-path"}},[e._v("例：~/MCDR/ MCDR是你的MCDR所在的文件夹")]),t("br"),t("b-form-checkbox",{attrs:{switch:""},model:{value:e.scr.clearOriginPlgs,callback:function(t){e.$set(e.scr,"clearOriginPlgs",t)},expression:"scr.clearOriginPlgs"}},[e._v("安装时保留原MCDR插件")]),t("b-form-text",[e._v("当保留时，更新的插件会覆盖旧的插件")]),t("hr"),t("p",[e._v("验证问题")]),t("label",{attrs:{for:"id-input-validate-cal"}},[e._v(e._s(e.validate.dig1)+" + "+e._s(e.validate.dig2)+" = ")]),t("b-form-input",{attrs:{id:"id-input-validate-cal",required:"",state:e.validateAnswer,placeholder:"小学生数学题","invalid-feedback":"答案错误","aria-describedby":"input-live-help input-live-feedback"},model:{value:e.validate.sum,callback:function(t){e.$set(e.validate,"sum",t)},expression:"validate.sum"}}),t("b-form-invalid-feedback",{attrs:{id:"id-input-validate-cal"}},[e._v(" 请输入正确的计算答案 ")])],1),t("b-sidebar",{attrs:{id:"sidebar-plg-market",title:"插件市场",shadow:""}},[t("div",{staticClass:"container",attrs:{id:"id-plg-market"}},[t("b-badge",{attrs:{variant:"info",target:"_blank",href:"https://github.com/cyf-gh/MCDRPluginCataJson"}},[e._v("我要上传插件")]),t("br"),t("hr"),t("h5",[e._v("分类")]),t("b-form-select",{ref:"select-cats",attrs:{id:"id-select-cats",options:e.feed,"value-field":"plg","text-field":"cat"},on:{change:e.selectChanged},model:{value:e.curPlgItems,callback:function(t){e.curPlgItems=t},expression:"curPlgItems"}}),t("div",[t("b-table",{ref:"selectPlgs",attrs:{id:"id-table-plgs",hover:"",items:e.curPlgItems,"current-page":e.curPage,fields:e.fields,"per-page":e.perPage,small:""},on:{"row-clicked":e.onRowSelected}})],1),t("b-pagination",{attrs:{align:"center","per-page":e.perPage,"total-rows":e.rows,"aria-controls":"id-table-plgs"},model:{value:e.curPage,callback:function(t){e.curPage=t},expression:"curPage"}})],1),t("hr"),t("b-container",[t("small",[e._v("插件源")]),t("b-form-input",{attrs:{id:"id-input-plg-feed",required:"",placeholder:"URI"},model:{value:e.feedSource,callback:function(t){e.feedSource=t},expression:"feedSource"}}),t("b-badge",{attrs:{pill:"",variant:"info",href:"#"},on:{mousedown:e.updateFeedSource}},[e._v("点击更新源")]),t("small",{staticClass:"d-block mb-3 text-muted"},[e._v("官方插件源地址："),t("br"),e._v("1："),t("br"),e._v("https://raw.githubusercontent.com/cyf-gh/MCDRPluginCataJson/master/feed.json"),t("br"),e._v("2:"),t("br"),e._v("https://se.cyf-cloud.cn:2346/v1/util/mcdr/plg/feed")]),t("b-alert",{attrs:{show:"",variant:"info"}},[t("h4",{staticClass:"alert-heading"},[e._v("使用方法")]),t("p",[e._v(" 1. 在插件市场中点击一次则会勾选该插件。点击已经选过的插件会取消对该插件的选择。 "),t("br"),e._v("2. 再选中的所有插件列表中，点击任意插件可取消对该插件的选择。 ")]),t("hr"),t("p",[e._v("uuid: "+e._s(e.uuid))])])],1)],1),t("b-card-group",[t("b-card",[t("div",{staticClass:"container text-center"},[t("br"),0==e.selectedPlgs.length?t("h1",[e._v("你还未选择任何插件")]):e._e(),0<e.selectedPlgs.length?t("h1",[e._v("已选插件列表 "),t("b-badge",[e._v(e._s(e.selectedPlgs.length)+"个插件")])],1):e._e(),t("br"),t("b-table",{ref:"selectPlgs",attrs:{striped:"",id:"id-table-plgs",hover:"",items:e.selectedPlgs,"current-page":e.curPage2,"per-page":e.perPage2,small:""},on:{"row-clicked":e.onSelectedPlgCliced}}),t("b-pagination",{attrs:{align:"center","per-page":e.perPage2,"total-rows":e.rows2,"aria-controls":"id-table-plgs"},model:{value:e.curPage2,callback:function(t){e.curPage2=t},expression:"curPage2"}}),t("b-button-group",[t("b-button",{on:{click:e.openCreatescr}},[e._v("下一步")]),t("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-plg-market",modifiers:{"sidebar-plg-market":!0}}],attrs:{variant:"info"}},[e._v("打开插件市场")])],1),t("br")],1)]),t("b-card",[t("h3",{staticClass:"text-center"},[e._v("安装教程视频")]),t("b-embed",{attrs:{src:"https://player.bilibili.com/player.html?aid=669491459&cid=230645380&page=1&danmaku=0",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",width:"auto",height:"auto"}})],1)],1),""!=e.scr.src?t("b-container",[t("b-card",[t("hr"),t("b-alert",{attrs:{show:"",variant:"warning"}},[e._v("如果插件有变动则请重新生成脚本")]),t("label",[e._v("复制到终端并运行")]),t("b-form-input",{attrs:{id:"input-large",size:"lg",placeholder:"Code..."},model:{value:e.runScript,callback:function(t){e.runScript=t},expression:"runScript"}}),t("br"),t("label",[e._v("脚本")]),t("b-form-textarea",{attrs:{id:"textarea",placeholder:"Code here...",rows:"3","max-rows":"10"},model:{value:e.scr.src,callback:function(t){e.$set(e.scr,"src",t)},expression:"scr.src"}})],1)],1):e._e()],1)}),[],!1,null,"e66a5764",null);t.default=a.exports},b58b:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},df25:function(e,t,a){"use strict";var r={name:"ccMentionDeprecated"};a=a("cba8"),a=Object(a.a)(r,(function(){var e=this.$createElement;e=this._self._c||e;return e("div",{staticClass:"text-center"},[e("b-alert",{attrs:{show:"",variant:"warning"}},[this._v("该页面被标记为弃用，可能无法正常运作")])],1)}),[],!1,null,null,null);t.a=a.exports},fc1e:function(e,t,a){function r(e){return function(t){return t=c(i(t)),1&e&&(t=n(t,l,"")),2&e?n(t,o,""):t}}var s=a("6f14"),i=a("3978"),c=a("3e87"),n=(a=a("b58b"),s("".replace)),l=(s="["+a+"]",RegExp("^"+s+s+"*")),o=RegExp(s+s+"*$");e.exports={start:r(1),end:r(2),trim:r(3)}}}]);