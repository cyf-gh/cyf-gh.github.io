(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b1cf6606"],{"12ea":function(e,t,r){var a=r("e8e0"),n=r("eb68");e.exports=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return a(t.call(e))}},"1fa9":function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"1ff9":function(e,t,r){"use strict";var a=2147483647,n=36,s=1,i=26,o=38,l=700,c=72,h=128,u="-",f=/[^\0-\u007E]/,p=/[.\u3002\uFF0E\uFF61]/g,m="Overflow: input needs wider integers to process",d=n-s,g=Math.floor,v=String.fromCharCode,b=function(e){var t=[],r=0,a=e.length;while(r<a){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<a){var s=e.charCodeAt(r++);56320==(64512&s)?t.push(((1023&n)<<10)+(1023&s)+65536):(t.push(n),r--)}else t.push(n)}return t},k=function(e){return e+22+75*(e<26)},w=function(e,t,r){var a=0;for(e=r?g(e/l):e>>1,e+=g(e/t);e>d*i>>1;a+=n)e=g(e/d);return g(a+(d+1)*e/(e+o))},y=function(e){var t=[];e=b(e);var r,o,l=e.length,f=h,p=0,d=c;for(r=0;r<e.length;r++)o=e[r],o<128&&t.push(v(o));var y=t.length,C=y;y&&t.push(u);while(C<l){var N=a;for(r=0;r<e.length;r++)o=e[r],o>=f&&o<N&&(N=o);var x=C+1;if(N-f>g((a-p)/x))throw RangeError(m);for(p+=(N-f)*x,f=N,r=0;r<e.length;r++){if(o=e[r],o<f&&++p>a)throw RangeError(m);if(o==f){for(var _=p,P=n;;P+=n){var D=P<=d?s:P>=d+i?i:P-d;if(_<D)break;var I=_-D,T=n-D;t.push(v(k(D+I%T))),_=g(I/T)}t.push(v(k(_))),d=w(p,x,C==y),p=0,++C}}++p,++f}return t.join("")};e.exports=function(e){var t,r,a=[],n=e.toLowerCase().replace(p,".").split(".");for(t=0;t<n.length;t++)r=n[t],a.push(f.test(r)?"xn--"+y(r):r);return a.join(".")}},2781:function(e,t,r){"use strict";r("cedf")},"27af":function(e,t,r){"use strict";r("dc28");var a,n=r("bde0"),s=r("14b8"),i=r("e972"),o=r("cc50"),l=r("bb10"),c=r("5b20"),h=r("a14d"),u=r("533c"),f=r("6a48"),p=r("9633"),m=r("e86b").codeAt,d=r("1ff9"),g=r("fea1"),v=r("e65c"),b=r("4183"),k=o.URL,w=v.URLSearchParams,y=v.getState,C=b.set,N=b.getterFor("URL"),x=Math.floor,_=Math.pow,P="Invalid authority",D="Invalid scheme",I="Invalid host",T="Invalid port",S=/[A-Za-z]/,R=/[\d+-.A-Za-z]/,A=/\d/,L=/^(0x|0X)/,M=/^[0-7]+$/,E=/^\d+$/,U=/^[\dA-Fa-f]+$/,B=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,F=/[\u0000\t\u000A\u000D #/:?@[\\]]/,$=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,q=/[\t\u000A\u000D]/g,z=function(e,t){var r,a,n;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return I;if(r=j(t.slice(1,-1)),!r)return I;e.host=r}else if(K(e)){if(t=d(t),B.test(t))return I;if(r=O(t),null===r)return I;e.host=r}else{if(F.test(t))return I;for(r="",a=p(t),n=0;n<a.length;n++)r+=H(a[n],J);e.host=r}},O=function(e){var t,r,a,n,s,i,o,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),t=l.length,t>4)return e;for(r=[],a=0;a<t;a++){if(n=l[a],""==n)return e;if(s=10,n.length>1&&"0"==n.charAt(0)&&(s=L.test(n)?16:8,n=n.slice(8==s?1:2)),""===n)i=0;else{if(!(10==s?E:8==s?M:U).test(n))return e;i=parseInt(n,s)}r.push(i)}for(a=0;a<t;a++)if(i=r[a],a==t-1){if(i>=_(256,5-t))return null}else if(i>255)return null;for(o=r.pop(),a=0;a<r.length;a++)o+=r[a]*_(256,3-a);return o},j=function(e){var t,r,a,n,s,i,o,l=[0,0,0,0,0,0,0,0],c=0,h=null,u=0,f=function(){return e.charAt(u)};if(":"==f()){if(":"!=e.charAt(1))return;u+=2,c++,h=c}while(f()){if(8==c)return;if(":"!=f()){t=r=0;while(r<4&&U.test(f()))t=16*t+parseInt(f(),16),u++,r++;if("."==f()){if(0==r)return;if(u-=r,c>6)return;a=0;while(f()){if(n=null,a>0){if(!("."==f()&&a<4))return;u++}if(!A.test(f()))return;while(A.test(f())){if(s=parseInt(f(),10),null===n)n=s;else{if(0==n)return;n=10*n+s}if(n>255)return;u++}l[c]=256*l[c]+n,a++,2!=a&&4!=a||c++}if(4!=a)return;break}if(":"==f()){if(u++,!f())return}else if(f())return;l[c++]=t}else{if(null!==h)return;u++,c++,h=c}}if(null!==h){i=c-h,c=7;while(0!=c&&i>0)o=l[c],l[c--]=l[h+i-1],l[h+--i]=o}else if(8!=c)return;return l},V=function(e){for(var t=null,r=1,a=null,n=0,s=0;s<8;s++)0!==e[s]?(n>r&&(t=a,r=n),a=null,n=0):(null===a&&(a=s),++n);return n>r&&(t=a,r=n),t},X=function(e){var t,r,a,n;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=x(e/256);return t.join(".")}if("object"==typeof e){for(t="",a=V(e),r=0;r<8;r++)n&&0===e[r]||(n&&(n=!1),a===r?(t+=r?":":"::",n=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return"["+t+"]"}return e},J={},W=f({},J,{" ":1,'"':1,"<":1,">":1,"`":1}),Y=f({},W,{"#":1,"?":1,"{":1,"}":1}),G=f({},Y,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),H=function(e,t){var r=m(e,0);return r>32&&r<127&&!u(t,e)?e:encodeURIComponent(e)},Z={ftp:21,file:null,http:80,https:443,ws:80,wss:443},K=function(e){return u(Z,e.scheme)},Q=function(e){return""!=e.username||""!=e.password},ee=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},te=function(e,t){var r;return 2==e.length&&S.test(e.charAt(0))&&(":"==(r=e.charAt(1))||!t&&"|"==r)},re=function(e){var t;return e.length>1&&te(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},ae=function(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&te(t[0],!0)||t.pop()},ne=function(e){return"."===e||"%2e"===e.toLowerCase()},se=function(e){return e=e.toLowerCase(),".."===e||"%2e."===e||".%2e"===e||"%2e%2e"===e},ie={},oe={},le={},ce={},he={},ue={},fe={},pe={},me={},de={},ge={},ve={},be={},ke={},we={},ye={},Ce={},Ne={},xe={},_e={},Pe={},De=function(e,t,r,n){var s,i,o,l,c=r||ie,h=0,f="",m=!1,d=!1,g=!1;r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace($,"")),t=t.replace(q,""),s=p(t);while(h<=s.length){switch(i=s[h],c){case ie:if(!i||!S.test(i)){if(r)return D;c=le;continue}f+=i.toLowerCase(),c=oe;break;case oe:if(i&&(R.test(i)||"+"==i||"-"==i||"."==i))f+=i.toLowerCase();else{if(":"!=i){if(r)return D;f="",c=le,h=0;continue}if(r&&(K(e)!=u(Z,f)||"file"==f&&(Q(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=f,r)return void(K(e)&&Z[e.scheme]==e.port&&(e.port=null));f="","file"==e.scheme?c=ke:K(e)&&n&&n.scheme==e.scheme?c=ce:K(e)?c=pe:"/"==s[h+1]?(c=he,h++):(e.cannotBeABaseURL=!0,e.path.push(""),c=xe)}break;case le:if(!n||n.cannotBeABaseURL&&"#"!=i)return D;if(n.cannotBeABaseURL&&"#"==i){e.scheme=n.scheme,e.path=n.path.slice(),e.query=n.query,e.fragment="",e.cannotBeABaseURL=!0,c=Pe;break}c="file"==n.scheme?ke:ue;continue;case ce:if("/"!=i||"/"!=s[h+1]){c=ue;continue}c=me,h++;break;case he:if("/"==i){c=de;break}c=Ne;continue;case ue:if(e.scheme=n.scheme,i==a)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query;else if("/"==i||"\\"==i&&K(e))c=fe;else if("?"==i)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query="",c=_e;else{if("#"!=i){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.path.pop(),c=Ne;continue}e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query,e.fragment="",c=Pe}break;case fe:if(!K(e)||"/"!=i&&"\\"!=i){if("/"!=i){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,c=Ne;continue}c=de}else c=me;break;case pe:if(c=me,"/"!=i||"/"!=f.charAt(h+1))continue;h++;break;case me:if("/"!=i&&"\\"!=i){c=de;continue}break;case de:if("@"==i){m&&(f="%40"+f),m=!0,o=p(f);for(var v=0;v<o.length;v++){var b=o[v];if(":"!=b||g){var k=H(b,G);g?e.password+=k:e.username+=k}else g=!0}f=""}else if(i==a||"/"==i||"?"==i||"#"==i||"\\"==i&&K(e)){if(m&&""==f)return P;h-=p(f).length+1,f="",c=ge}else f+=i;break;case ge:case ve:if(r&&"file"==e.scheme){c=ye;continue}if(":"!=i||d){if(i==a||"/"==i||"?"==i||"#"==i||"\\"==i&&K(e)){if(K(e)&&""==f)return I;if(r&&""==f&&(Q(e)||null!==e.port))return;if(l=z(e,f),l)return l;if(f="",c=Ce,r)return;continue}"["==i?d=!0:"]"==i&&(d=!1),f+=i}else{if(""==f)return I;if(l=z(e,f),l)return l;if(f="",c=be,r==ve)return}break;case be:if(!A.test(i)){if(i==a||"/"==i||"?"==i||"#"==i||"\\"==i&&K(e)||r){if(""!=f){var w=parseInt(f,10);if(w>65535)return T;e.port=K(e)&&w===Z[e.scheme]?null:w,f=""}if(r)return;c=Ce;continue}return T}f+=i;break;case ke:if(e.scheme="file","/"==i||"\\"==i)c=we;else{if(!n||"file"!=n.scheme){c=Ne;continue}if(i==a)e.host=n.host,e.path=n.path.slice(),e.query=n.query;else if("?"==i)e.host=n.host,e.path=n.path.slice(),e.query="",c=_e;else{if("#"!=i){re(s.slice(h).join(""))||(e.host=n.host,e.path=n.path.slice(),ae(e)),c=Ne;continue}e.host=n.host,e.path=n.path.slice(),e.query=n.query,e.fragment="",c=Pe}}break;case we:if("/"==i||"\\"==i){c=ye;break}n&&"file"==n.scheme&&!re(s.slice(h).join(""))&&(te(n.path[0],!0)?e.path.push(n.path[0]):e.host=n.host),c=Ne;continue;case ye:if(i==a||"/"==i||"\\"==i||"?"==i||"#"==i){if(!r&&te(f))c=Ne;else if(""==f){if(e.host="",r)return;c=Ce}else{if(l=z(e,f),l)return l;if("localhost"==e.host&&(e.host=""),r)return;f="",c=Ce}continue}f+=i;break;case Ce:if(K(e)){if(c=Ne,"/"!=i&&"\\"!=i)continue}else if(r||"?"!=i)if(r||"#"!=i){if(i!=a&&(c=Ne,"/"!=i))continue}else e.fragment="",c=Pe;else e.query="",c=_e;break;case Ne:if(i==a||"/"==i||"\\"==i&&K(e)||!r&&("?"==i||"#"==i)){if(se(f)?(ae(e),"/"==i||"\\"==i&&K(e)||e.path.push("")):ne(f)?"/"==i||"\\"==i&&K(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&te(f)&&(e.host&&(e.host=""),f=f.charAt(0)+":"),e.path.push(f)),f="","file"==e.scheme&&(i==a||"?"==i||"#"==i))while(e.path.length>1&&""===e.path[0])e.path.shift();"?"==i?(e.query="",c=_e):"#"==i&&(e.fragment="",c=Pe)}else f+=H(i,Y);break;case xe:"?"==i?(e.query="",c=_e):"#"==i?(e.fragment="",c=Pe):i!=a&&(e.path[0]+=H(i,J));break;case _e:r||"#"!=i?i!=a&&("'"==i&&K(e)?e.query+="%27":e.query+="#"==i?"%23":H(i,J)):(e.fragment="",c=Pe);break;case Pe:i!=a&&(e.fragment+=H(i,W));break}h++}},Ie=function(e){var t,r,a=h(this,Ie,"URL"),n=arguments.length>1?arguments[1]:void 0,i=String(e),o=C(a,{type:"URL"});if(void 0!==n)if(n instanceof Ie)t=N(n);else if(r=De(t={},String(n)),r)throw TypeError(r);if(r=De(o,i,null,t),r)throw TypeError(r);var l=o.searchParams=new w,c=y(l);c.updateSearchParams(o.query),c.updateURL=function(){o.query=String(l)||null},s||(a.href=Se.call(a),a.origin=Re.call(a),a.protocol=Ae.call(a),a.username=Le.call(a),a.password=Me.call(a),a.host=Ee.call(a),a.hostname=Ue.call(a),a.port=Be.call(a),a.pathname=Fe.call(a),a.search=$e.call(a),a.searchParams=qe.call(a),a.hash=ze.call(a))},Te=Ie.prototype,Se=function(){var e=N(this),t=e.scheme,r=e.username,a=e.password,n=e.host,s=e.port,i=e.path,o=e.query,l=e.fragment,c=t+":";return null!==n?(c+="//",Q(e)&&(c+=r+(a?":"+a:"")+"@"),c+=X(n),null!==s&&(c+=":"+s)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?i[0]:i.length?"/"+i.join("/"):"",null!==o&&(c+="?"+o),null!==l&&(c+="#"+l),c},Re=function(){var e=N(this),t=e.scheme,r=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(a){return"null"}return"file"!=t&&K(e)?t+"://"+X(e.host)+(null!==r?":"+r:""):"null"},Ae=function(){return N(this).scheme+":"},Le=function(){return N(this).username},Me=function(){return N(this).password},Ee=function(){var e=N(this),t=e.host,r=e.port;return null===t?"":null===r?X(t):X(t)+":"+r},Ue=function(){var e=N(this).host;return null===e?"":X(e)},Be=function(){var e=N(this).port;return null===e?"":String(e)},Fe=function(){var e=N(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},$e=function(){var e=N(this).query;return e?"?"+e:""},qe=function(){return N(this).searchParams},ze=function(){var e=N(this).fragment;return e?"#"+e:""},Oe=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(s&&l(Te,{href:Oe(Se,(function(e){var t=N(this),r=String(e),a=De(t,r);if(a)throw TypeError(a);y(t.searchParams).updateSearchParams(t.query)})),origin:Oe(Re),protocol:Oe(Ae,(function(e){var t=N(this);De(t,String(e)+":",ie)})),username:Oe(Le,(function(e){var t=N(this),r=p(String(e));if(!ee(t)){t.username="";for(var a=0;a<r.length;a++)t.username+=H(r[a],G)}})),password:Oe(Me,(function(e){var t=N(this),r=p(String(e));if(!ee(t)){t.password="";for(var a=0;a<r.length;a++)t.password+=H(r[a],G)}})),host:Oe(Ee,(function(e){var t=N(this);t.cannotBeABaseURL||De(t,String(e),ge)})),hostname:Oe(Ue,(function(e){var t=N(this);t.cannotBeABaseURL||De(t,String(e),ve)})),port:Oe(Be,(function(e){var t=N(this);ee(t)||(e=String(e),""==e?t.port=null:De(t,e,be))})),pathname:Oe(Fe,(function(e){var t=N(this);t.cannotBeABaseURL||(t.path=[],De(t,e+"",Ce))})),search:Oe($e,(function(e){var t=N(this);e=String(e),""==e?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",De(t,e,_e)),y(t.searchParams).updateSearchParams(t.query)})),searchParams:Oe(qe),hash:Oe(ze,(function(e){var t=N(this);e=String(e),""!=e?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",De(t,e,Pe)):t.fragment=null}))}),c(Te,"toJSON",(function(){return Se.call(this)}),{enumerable:!0}),c(Te,"toString",(function(){return Se.call(this)}),{enumerable:!0}),k){var je=k.createObjectURL,Ve=k.revokeObjectURL;je&&c(Ie,"createObjectURL",(function(e){return je.apply(k,arguments)})),Ve&&c(Ie,"revokeObjectURL",(function(e){return Ve.apply(k,arguments)}))}g(Ie,"URL"),n({global:!0,forced:!i,sham:!s},{URL:Ie})},5938:function(e,t,r){"use strict";var a=r("bde0"),n=r("42b5"),s=r("b120"),i=r("33c6"),o=r("b2de"),l=r("f48b"),c=r("b4b0"),h=r("5034"),u=h("splice"),f=Math.max,p=Math.min,m=9007199254740991,d="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var r,a,h,u,g,v,b=o(this),k=i(b.length),w=n(e,k),y=arguments.length;if(0===y?r=a=0:1===y?(r=0,a=k-w):(r=y-2,a=p(f(s(t),0),k-w)),k+r-a>m)throw TypeError(d);for(h=l(b,a),u=0;u<a;u++)g=w+u,g in b&&c(h,u,b[g]);if(h.length=a,r<a){for(u=w;u<k-a;u++)g=u+a,v=u+r,g in b?b[v]=b[g]:delete b[v];for(u=k;u>k-a+r;u--)delete b[u-1]}else if(r>a)for(u=k-a;u>w;u--)g=u+a-1,v=u+r-1,g in b?b[v]=b[g]:delete b[v];for(u=0;u<r;u++)b[u+w]=arguments[u+2];return b.length=k-a+r,h}})},"9d0c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[1==e.showBanner?r("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("当前新建的项目还未保存，如确定该项目请先点击右下角的"),r("strong",[e._v("保存")]),e._v("按钮或"),r("a",{attrs:{href:"#"},on:{click:e.updateData}},[e._v("这里")]),e._v("进行云端保存。")]):e._e(),r("b-card",[r("b-tabs",{attrs:{"content-class":"mt-3",align:"center"}},[r("b-tab",{attrs:{title:"基本信息",active:""},on:{click:e.calDays}},[r("b-card",[r("small",[e._v("项目名称：")]),r("b-form-input",{attrs:{size:"sm"},model:{value:e.meta.Title,callback:function(t){e.$set(e.meta,"Title",t)},expression:"meta.Title"}},[e._v("保存")])],1),r("b-row",[r("b-col",{attrs:{md:"6"}},e._l(e.basicInfos,(function(t){return r("b-card",{key:t.Title},[r("h1",[e._v(e._s(t.Title))]),r("tbody",e._l(t.Childs,(function(t){return r("tr",{key:t.k},[r("td",[r("small",[e._v(e._s(t.k))])]),r("td",[r("b-form-textarea",{attrs:{rows:"1","max-rows":"6",size:"sm"},on:{change:e.printinfo},model:{value:t.v,callback:function(r){e.$set(t,"v",r)},expression:"c.v"}})],1)])})),0)])})),1),r("b-col",{attrs:{md:"6"}},e._l(e.basicInfos2,(function(t){return r("b-card",{key:t.Title},[r("h1",[e._v(e._s(t.Title))]),e._l(t.Childs,(function(t){return r("tbody",{key:t.Title},[r("h2",[e._v(e._s(t.Title))]),e._l(t.Childs,(function(a){return r("tr",{key:a.k},[r("td",[r("small",[e._v(e._s(a.k))])]),r("td",["时长统计"==t.Title?r("b-form-input",{attrs:{disabled:"",size:"sm"},model:{value:a.v,callback:function(t){e.$set(a,"v",t)},expression:"cc.v"}}):r("b-form-textarea",{attrs:{rows:"1","max-rows":"6",size:"sm"},model:{value:a.v,callback:function(t){e.$set(a,"v",t)},expression:"cc.v"}})],1)])}))],2)}))],2)})),1)],1)],1),r("b-tab",{attrs:{title:"参考打分值"}},[r("b-row",[r("b-col",{attrs:{md:"6"}},[void 0!=e.progress?r("b-card",{attrs:{id:"table-marking"}},[e._l(e.progress,(function(t,a){return r("tbody",{key:t.Name},e._l(t.Childs,(function(n,s){return r("tr",{key:n.Name},[0==s?r("td",{attrs:{rowspan:t.Childs.length}},[e._v(" "+e._s(t.Name)+" ")]):e._e(),r("td",[e._v(e._s(n.Name))]),r("td",[e._v(e._s(n.Percent)+"%")]),r("td",[r("b-form",{attrs:{inline:""}},[r("b-form-input",{attrs:{size:"sm",type:"text",state:e.vaildDate(n)&&e.validDateNextPrev(n,a)},on:{change:function(r){return e.changeDate(t,n,s,a)}},model:{value:n.Date,callback:function(t){e.$set(n,"Date",t)},expression:"c.Date"}}),r("b-form-invalid-feedback",{attrs:{state:e.vaildDate(n)}},[e._v(" 日期不合法，请输入 yyyy/mm/dd 的格式 ")]),r("b-form-invalid-feedback",{attrs:{state:e.validDateNextPrev(n,a)}},[e._v(" 主流程的日期不可大于下一个流程的日期或小于上一个流程的日期 ")]),r("b-button",{attrs:{size:"sm",variant:"light"},on:{click:function(r){return e.delProgress(t,s,a)}}},[e._v("X")]),1==t.Childs.length&&0!=a?r("b-button",{attrs:{size:"sm",variant:"warning"},on:{click:function(r){return e.upProgress(t,a)}}},[e._v("↑")]):e._e(),1==t.Childs.length&&a!=e.progress.length-1?r("b-button",{attrs:{size:"sm",variant:"warning"},on:{click:function(r){return e.downProgress(t,a)}}},[e._v("↓")]):e._e(),s!=t.Childs.length-1?r("div",[t.Childs[s+1].Date==n.Date?r("b-button",{on:{click:function(r){return e.swapSame(t,s)}}},[e._v("调换")]):e._e()],1):e._e(),1==t.Childs.length?r("small",[e._v("只有大流程中有一个步骤时可以移动大流程")]):e._e()],1)],1),0==s?r("td",{attrs:{rowspan:t.Childs.length}},[e._v(" 耗时："+e._s(e.sumDay(t))+"天 ")]):e._e()])})),0)})),r("hr"),r("b-form",{attrs:{inline:""}},[r("b-form-select",{attrs:{size:"sm",options:e.pg.mainops},on:{change:e.selectchanged},model:{value:e.pg.selectMainName,callback:function(t){e.$set(e.pg,"selectMainName",t)},expression:"pg.selectMainName"}}),null!=e.pg.selectMainName?r("b-form-select",{attrs:{size:"sm",options:e.pg.childops},model:{value:e.pg.selectChildName,callback:function(t){e.$set(e.pg,"selectChildName",t)},expression:"pg.selectChildName"}}):e._e(),r("b-button",{attrs:{variant:"info",size:"sm"},on:{click:e.addProgress}},[e._v("添加流程")])],1)],2):e._e()],1),r("b-col",{attrs:{md:"6"}},[r("b-card",{staticStyle:{".transformed {transform":"scale(0.5)"},attrs:{id:"table-marking"}},[r("table",[r("thead",[r("tr",[r("th",{attrs:{colspan:"3"}},[e._v("参考流程打分值")])])]),r("tbody",[r("tr",[r("th",{attrs:{colspan:"2"}},[e._v("步骤")]),r("th",[e._v("进度")])])]),e._l(e.example_marking,(function(t){return r("tbody",{key:t.Name},e._l(t.Childs,(function(a,n){return r("tr",{key:a.Name},[0==n?r("td",{attrs:{rowspan:t.Childs.length}},[e._v(" "+e._s(t.Name)+" ")]):e._e(),r("td",[e._v(e._s(a.Name))]),r("td",[r("b-form",{attrs:{inline:""}},[r("b-input",{staticStyle:{width:"5rem"},attrs:{size:"sm",type:"number"},on:{change:function(r){return e.changeMarkingPercent(t,a)}},model:{value:a.Percent,callback:function(t){e.$set(a,"Percent",t)},expression:"c.Percent"}}),e._v("% ")],1)],1)])})),0)}))],2),r("hr"),r("b-form",{attrs:{"class-content":"mx-2",inline:""}},[r("small",[e._v("主步骤名：")]),r("b-input",{staticStyle:{width:"5rem"},attrs:{size:"sm"},model:{value:e.new_marking.Name,callback:function(t){e.$set(e.new_marking,"Name",t)},expression:"new_marking.Name"}}),r("small",[e._v("步骤名：")]),r("b-input",{staticStyle:{width:"5rem"},attrs:{size:"sm"},model:{value:e.new_marking.ChildName,callback:function(t){e.$set(e.new_marking,"ChildName",t)},expression:"new_marking.ChildName"}}),r("small",[e._v("完成百分比：")]),r("b-input",{staticStyle:{width:"5rem"},attrs:{size:"sm",type:"number"},model:{value:e.new_marking.Percent,callback:function(t){e.$set(e.new_marking,"Percent",t)},expression:"new_marking.Percent"}}),e._v(" % "),r("b-button",{attrs:{variant:"info",size:"sm"},on:{click:e.addMarking}},[e._v("添加一笔流程")])],1),r("hr"),r("b-form",{attrs:{"class-content":"mx-2",inline:""}},[r("small",[e._v("主步骤名：")]),r("b-input",{staticStyle:{width:"5rem"},attrs:{size:"sm"},model:{value:e.delete_marking.Name,callback:function(t){e.$set(e.delete_marking,"Name",t)},expression:"delete_marking.Name"}}),r("small",[e._v("步骤名：")]),r("b-input",{staticStyle:{width:"5rem"},attrs:{size:"sm"},model:{value:e.delete_marking.ChildName,callback:function(t){e.$set(e.delete_marking,"ChildName",t)},expression:"delete_marking.ChildName"}}),r("b-button",{attrs:{variant:"info",size:"sm"},on:{click:e.delMarking}},[e._v("删除该流程")])],1)],1)],1)],1)],1),r("b-tab",{attrs:{title:"表格"},on:{click:function(t){return e.drawChart(e.chartProps.w,e.chartProps.h)}}},[r("div",{staticClass:"x"},[r("canvas",{attrs:{id:"chart"}})]),r("b-form",{attrs:{inline:""}},[r("small",[e._v("横坐标分割数量")]),r("b-input",{attrs:{size:"sm",type:"number"},model:{value:e.chartProps.XDelta,callback:function(t){e.$set(e.chartProps,"XDelta",t)},expression:"chartProps.XDelta"}}),r("small",[e._v("表格宽")]),r("b-input",{attrs:{size:"sm",type:"number"},model:{value:e.chartProps.w,callback:function(t){e.$set(e.chartProps,"w",t)},expression:"chartProps.w"}}),r("small",[e._v("表格长")]),r("b-input",{attrs:{size:"sm",type:"number"},model:{value:e.chartProps.h,callback:function(t){e.$set(e.chartProps,"h",t)},expression:"chartProps.h"}}),r("small",[e._v("文字旋转角度")]),r("b-input",{attrs:{size:"sm",type:"number"},model:{value:e.chartProps.TagAng,callback:function(t){e.$set(e.chartProps,"TagAng",t)},expression:"chartProps.TagAng"}}),r("b-button",{attrs:{variant:"info",size:"sm"},on:{click:function(t){return e.drawChart(e.chartProps.w,e.chartProps.h)}}},[e._v("重新绘制")])],1),r("h5",[e._v("项目总耗时"+e._s(e.chartProps.totalDays)+"天")])],1)],1),r("b-navbar",{attrs:{fixed:"bottom"}},[r("b-nav",{staticClass:"mr-0"},[r("b-button",{attrs:{size:"sm",variant:"light"},on:{click:e.back2Home}},[e._v("返回项目列表")])],1),r("b-nav",{staticClass:"mx-auto"}),r("b-nav",{staticClass:"ml-0"},[0==e.showBanner?r("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"primary"},on:{click:e.exportExcelProject}},[e._v("生成Excel表格")]):e._e(),r("b-button",{attrs:{size:"sm",variant:"info"},on:{click:e.updateData}},[e._v("保存")])],1)],1)],1)],1)},n=[],s=(r("16cc"),r("dc28"),r("f073"),r("27af"),r("71d0"),r("29dd"),r("5938"),r("c0e8"),r("8545"),r("44aa"));r("9065"),r("2cde"),r("e5e2");function i(){console.log("cc canvas util")}CanvasRenderingContext2D.prototype.fillTextCenterX=function(e,t,r){var a=this,n=a.measureText(e);a.fillText(e,t-n.width/2,r)},CanvasRenderingContext2D.prototype.fillTextCenter=function(e,t,r){var a=this,n=a.measureText(e),s=n.actualBoundingBoxAscent+n.actualBoundingBoxDescent;a.fillText(e,t-n.width/2,r+s/2)},CanvasRenderingContext2D.prototype.fillTextCenterY=function(e,t,r){var a=this,n=a.measureText(e),s=n.actualBoundingBoxAscent+n.actualBoundingBoxDescent;a.fillText(e,t,r+s/2)},CanvasRenderingContext2D.prototype.getTextWidth=function(e){var t=this,r=t.measureText(e);return r.width},CanvasRenderingContext2D.prototype.drawLine=function(e,t,r,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=this;s.lineWidth=n,s.beginPath(),s.moveTo(e,t),s.lineTo(r,a),s.stroke()},CanvasRenderingContext2D.prototype.r=function(e){return e},CanvasRenderingContext2D.prototype.fillTextVerticalRaw=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-Math.PI/2,n=this;n.save(),n.translate(t,r),n.rotate(a),n.textAlign=e,n.fillText(e,0,0),n.restore()},
/**
* @author zhangxinxu(.com)
* @licence MIT
* @description http://www.zhangxinxu.com/wordpress/?p=7362
*/
CanvasRenderingContext2D.prototype.fillTextVertical=function(e,t,r){var a=this,n=e.split(""),s=n.map((function(e){return a.measureText(e).width})),i=a.textAlign,o=a.textBaseline;"left"==i?t+=Math.max.apply(null,s)/2:"right"==i&&(t-=Math.max.apply(null,s)/2),"bottom"==o||"alphabetic"==o||"ideographic"==o?r-=s[0]/2:"top"!=o&&"hanging"!=o||(r+=s[0]/2),a.textAlign="center",a.textBaseline="middle",n.forEach((function(n,i){var o=s[i],l=n.charCodeAt(0);l<=256?(a.translate(t,r),a.rotate(90*Math.PI/180),a.translate(-t,-r)):i>0&&e.charCodeAt(i-1)<256&&(r+=s[i-1]/2),a.fillText(n,t,r),a.setTransform(1,0,0,1,0,0),o=s[i],r+=o})),a.textAlign=i,a.textBaseline=o};var o={Init:i},l=r("c7ec"),c=r("3f9d"),h=r("aea1"),u={components:{},created:function(){o.Init(),window.onbeforeunload=function(e){return e=e||window.event,e&&(e.returnValue="关闭提示"),"关闭提示"}},mounted:function(){var e=this;switch(l["a"].InitCookie(this.$cookie),s["a"].InitToast(this.$bvToast),this.accountInfo=JSON.parse(localStorage.getItem("cc_account_info")),this.meta.OwnerId=this.accountInfo.Id,console.log(this.accountInfo),l["a"].IsLogin()||this.$router.push({path:"/account/login?from=require_login"}),this.$route.query.mode){case"new":this.meta.Id=0,this.meta.Title=this.$route.query.title,this.showBanner=!0;break;case"modify":var t=this.$route.query.id;if(void 0==t)return void s["a"].Msg("错误","参数中未指定id，无法获取数据","danger");this.axios.get(c["a"]+"/v1x1/vp/project?id="+t,{withCredentials:!0}).then((function(t){if(h["a"].Check(t.data)){var r=JSON.parse(t.data.Data),a=JSON.parse(r.Data);e.meta.Title=r.Title,e.meta.OwnerId=r.OwnerId,e.meta.Id=r.Id,e.chartProps=a.chartProps,e.example_marking=a.marking,e.basicInfos=a.basicInfo,e.basicInfos2=a.basicInfo2,e.progress=a.progress,s["a"].Msg("载入项目数据","成功获取《"+e.meta.Title+"》的数据","success")}else console.error("in vp get project data",t.data.Desc),s["a"].Msg("错误",t.data.Desc,"danger");console.log(t)})).catch((function(e){s["a"].Msg("错误",e,"danger"),console.error(e)}));break}this.drawChart(this.chartProps.w,this.chartProps.h),this.refreshSelect()},data:function(){return{showBanner:!1,accountInfo:null,meta:{OwnerId:0,Id:0,Title:""},pg:{selectMainName:null,selectChildName:null,mainops:[],childops:[]},example_marking:[{Name:"营销",Childs:[{Name:"拜访",Percent:"6"},{Name:"确定方案",Percent:"10"},{Name:"收集资料",Percent:"15"}]},{Name:"评级",Childs:[{Name:"撰写评级",Percent:"20"},{Name:"交支行",Percent:"25"},{Name:"退回",Percent:"21"},{Name:"交分行",Percent:"30"},{Name:"评级完成",Percent:"35"}]},{Name:"授信",Childs:[{Name:"撰写授信",Percent:"40"},{Name:"交支行",Percent:"45"},{Name:"退回",Percent:"40"},{Name:"交分行",Percent:"50"},{Name:"上会",Percent:"55"},{Name:"授信批复",Percent:"60"}]},{Name:"提款",Childs:[{Name:"撰写提款",Percent:"61"},{Name:"交支行",Percent:"70"},{Name:"退回",Percent:"62"},{Name:"提款批复",Percent:"78"}]},{Name:"放款",Childs:[{Name:"提交",Percent:"80"},{Name:"退回",Percent:"81"},{Name:"放行",Percent:"100"}]}],new_marking:{Name:"",ChildName:"",Percent:""},delete_marking:{Name:"",ChildName:""},chartProps:{XDelta:20,nodes:[],totalDays:0,h:600,w:1400,TagAng:-Math.PI/3},progress:[{Name:"营销",Childs:[{Name:"拜访",Percent:"6",Date:"2020/5/25"},{Name:"确定方案",Percent:"10",Date:"2020/5/26"},{Name:"收集资料",Percent:"15",Date:"2020/6/25"}]},{Name:"评级",Childs:[{Name:"撰写评级",Percent:"20",Date:"2020/7/25"},{Name:"交支行",Percent:"25",Date:"2020/7/26"},{Name:"退回",Percent:"21",Date:"2020/7/28"},{Name:"交分行",Percent:"30",Date:"2020/10/25"},{Name:"评级完成",Percent:"35",Date:"2020/11/25"}]},{Name:"授信",Childs:[{Name:"撰写授信",Percent:"40",Date:"2021/1/5"},{Name:"交支行",Percent:"45",Date:"2021/1/15"},{Name:"退回",Percent:"40",Date:"2021/1/25"},{Name:"交分行",Percent:"50",Date:"2021/1/26"},{Name:"上会",Percent:"55",Date:"2021/1/27"},{Name:"授信批复",Percent:"60",Date:"2021/1/28"}]},{Name:"提款",Childs:[{Name:"撰写提款",Percent:"61",Date:"2021/2/28"},{Name:"交支行",Percent:"70",Date:"2021/3/28"},{Name:"退回",Percent:"62",Date:"2021/4/28"},{Name:"提款批复",Percent:"78",Date:"2021/5/28"}]},{Name:"放款",Childs:[{Name:"提交",Percent:"80",Date:"2021/6/28"},{Name:"退回",Percent:"81",Date:"2021/7/28"},{Name:"放行",Percent:"100",Date:"2021/8/28"}]}],basicInfos:[{Title:"客户营销/需求",Childs:[{k:"客户名",v:""},{k:"种类",v:""},{k:"金额(万元)",v:""},{k:"特殊套用",v:""},{k:"价格",v:""},{k:"时间节点",v:""},{k:"项目提要",v:""},{k:"他行竞争/续作情况",v:""},{k:"可能风险点",v:""},{k:"材料清单",v:""}]},{Title:"风险审批",Childs:[{k:"评级撰写质量",v:""},{k:"调查报告质量",v:""},{k:"需与分行确认的问题",v:""},{k:"营销部门未发现的瑕疵",v:""},{k:"其他风险-非实质性",v:""},{k:"其他风险-实质性",v:""},{k:"补充材料要求",v:""}]}],basicInfos2:[{Title:"部门尽调",Childs:[{Title:"尽调发现风险",Childs:[{k:"非实质性",v:"无"},{k:"实质性",v:"无"}]},{Title:"需协调问题",Childs:[{k:"柜面&账务",v:"无"},{k:"授信政策",v:"无"},{k:"其他",v:"无"}]},{Title:"风险审批发现问题是否已解决",Childs:[{k:"非实质性",v:"无"},{k:"实质性",v:"无"}]}]},{Title:"流程干预",Childs:[{Title:"行长室意见",Childs:[{k:"非实质性风险",v:""},{k:"实质性风险",v:""},{k:"其他",v:""}]},{Title:"时长统计",Childs:[{k:"营销评级",v:""},{k:"营销授信",v:""},{k:"风险评级",v:""},{k:"风险授信",v:""},{k:"总流程时长",v:""}]},{Title:"流程干涉",Childs:[{k:"",v:"无"}]}]}]}},methods:{exportExcelProject:function(){var e=this,t=document.getElementById("chart");this.axios.post(c["a"]+"/v1x1/vp/export",{Id:this.meta.Id,Title:this.meta.Title,Base64:t.toDataURL("image/png")},{withCredentials:!0,responseType:"blob"}).then((function(t){var r=URL.createObjectURL(new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),a=document.createElement("a");a.href=r,a.setAttribute("download",e.meta.Title+".xlsx"),document.body.appendChild(a),a.click()}))},back2Home:function(){this.$router.push({path:"/vp/home"})},printinfo:function(){},updateData:function(){var e=this;this.basicInfos2[1].Childs[1].Childs.forEach((function(e){console.log(e),e.v=e.v.toString()})),this.axios.post(c["a"]+"/v1x1/vp/update",{Id:this.meta.Id,OwnerId:this.meta.OwnerId,Title:this.meta.Title,Data:JSON.stringify({chartProps:this.chartProps,marking:this.example_marking,basicInfo:this.basicInfos,basicInfo2:this.basicInfos2,progress:this.progress})},{withCredentials:!0}).then((function(t){if(h["a"].Check(t.data)){var r=JSON.parse(t.data.Data);if(0!=r)return s["a"].Msg("成功","已成功第一次保存数据，正在跳转页面","success"),e.$router.push({path:"/vp/editor?mode=modify&id="+r}),window.onbeforeunload=null,location.reload(),void e.$router.go(0);s["a"].Msg("成功","已成功保存数据","success")}else console.error("in vp update",t.data.Desc),s["a"].Msg("错误",t.data.Desc,"danger");console.log(t)})).catch((function(e){s["a"].Msg("错误",e,"danger"),console.error(e)}))},calDays:function(){this.setValueInfo2("营销评级",this.getSumdayOf("评级")),this.setValueInfo2("营销授信",this.getSumdayOf("授信")),this.setValueInfo2("风险评级",this.getSumdayOf("提款")),this.setValueInfo2("风险授信",this.getSumdayOf("放款")),this.getTotalDays()},getSumdayOf:function(e){for(var t=0;t<this.progress.length;++t)if(e==this.progress[t].Name)return this.sumDay(this.progress[t]);return"/"},lastProgress:function(){return this.progress[this.progress.length-1]},getTotalDays:function(){var e=new Date(this.progress[0].Childs[0].Date),t=new Date(this.lastProgress().Childs[this.lastProgress().Childs.length-1].Date);this.setValueInfo2("总流程时长",Math.ceil((t-e)/864e5))},setValueInfo2:function(e,t){this.basicInfos2.forEach((function(r){"流程干预"!=r.Title||r.Childs.forEach((function(r){"时长统计"!=r.Title||r.Childs.forEach((function(r){r.k!=e||(r.v=t)}))}))}))},getValueInfo:function(e,t){var r="";return this.basicInfos.forEach((function(a){a.Title!=e||a.Childs.forEach((function(e){e.k!=t||(r=e.v)}))})),r},sumDay:function(e){try{var t=Date.parse(e.Childs[0].Date),r=Date.parse(e.Childs[e.Childs.length-1].Date);return 1==e.Childs.length?1:Math.ceil((r-t)/864e5)}catch(a){return 0}},swapSame:function(e,t){this.array_move(e.Childs,t,t+1)},refreshSelect:function(){this.pg.mainops=[];for(var e=0;e<this.example_marking.length;++e)this.pg.mainops.push(this.example_marking[e].Name)},array_move:function(e,t,r){if(r>=e.length){var a=r-e.length+1;while(a--)e.push(void 0)}return e.splice(r,0,e.splice(t,1)[0]),e},delProgress:function(e,t,r){var a=confirm("确认删除该流程？");a&&(1!=e.Childs.length?e.Childs.splice(t,1):this.progress.splice(r,1))},upProgress:function(e,t){this.array_move(this.progress,t,t-1)},downProgress:function(e,t){this.array_move(this.progress,t,t+1)},changeDate:function(e,t,r,a){console.log(e,t,r,a);try{var n=Date.parse(t.Date);if(isNaN(n))throw"非法的日期 =>"+t.Date+"<= 请检查";if(0==a){var i=Date.parse(this.progress[a+1].Childs[0].Date);if(n>i)throw"主流程的日期不可大于下一个流程的日期";return}if(a==this.progress.length-1){var o=Date.parse(this.progress[a-1].Childs[this.progress[a-1].Childs.length-1].Date);if(n<o)throw"主流程的日期不可小于上一个流程的日期";return}if(i=Date.parse(this.progress[a+1].Childs[0].Date),o=Date.parse(this.progress[a-1].Childs[this.progress[a-1].Childs.length-1].Date),n>i||n<o)throw console.log(n,i,o),"主流程的日期不可大于下一个流程的日期或小于上一个流程的日期";this.rerangeProgressByDate(e,t,r)}catch(l){s["a"].Msg("修改日期时发生错误",l,"danger"),console.error(l)}},addProgress:function(){""!=this.pg.selectChildName&&""!=this.pg.selectMainName||s["a"].Msg("错误","您还未选择主流程或流程","danger");for(var e=0;e<this.progress.length;++e)if(this.progress[e].Name==this.pg.selectMainName)return void this.progress[e].Childs.push({Name:this.pg.selectChildName,Percent:this.getPercent(this.pg.selectMainName,this.pg.selectChildName),Date:""});this.progress.push({Name:this.pg.selectMainName,Childs:[{Name:this.pg.selectChildName,Percent:this.getPercent(this.pg.selectMainName,this.pg.selectChildName),Date:""}]})},rerangeProgressByDate:function(e,t,r){console.log(e);for(var a=new Date(t.Date),n=e.Childs.length-1,s=0;s<e.Childs.length-1;++s){if(""==e.Childs[s+1].Date){n=s;break}var i=new Date(e.Childs[s].Date),o=new Date(e.Childs[s+1].Date);if(a>i&&a<=o){if(s+1==r)continue;return this.array_move(e.Childs,r,s>r?s:s+1),void console.log("move to between",s,s+1)}}a<new Date(e.Childs[0].Date)?(this.array_move(e.Childs,r,0),console.log("move to first")):a>new Date(e.Childs[n].Date)&&(this.array_move(e.Childs,r,n),console.log("move to last"))},getPercent:function(e,t){var r="0";return this.example_marking.forEach((function(a){a.Name==e&&a.Childs.forEach((function(e){e.Name!=t||(r=e.Percent)}))})),r},selectchanged:function(){for(var e=0;e<this.example_marking.length;++e)if(this.example_marking[e].Name==this.pg.selectMainName){this.pg.childops=[];for(var t=0;t<this.example_marking[e].Childs.length;++t)this.pg.childops.push(this.example_marking[e].Childs[t].Name);return}},drawChart:function(e,t){var r=document.getElementById("chart");r.height=t,r.width=e;var a=r.getContext("2d");a.fillStyle="#FFFFFF",a.fillRect(0,0,e,t),a.fillStyle="#000000";var n=0,s=n+e,i=0,o=i+t;a.font="1.2rem arial",a.fillTextCenterX("业务流程时点",e/2,20),a.font="0.8rem arial",a.fillTextCenterX(this.getValueInfo("客户营销/需求","客户名")+" - "+this.getValueInfo("客户营销/需求","种类"),e/2,40);var l={x:n+a.r(70),y:o-a.r(100)},c=i+a.r(50),h=s-a.r(80),u=(h-l.x)/2,f=(l.y-c)/2;a.drawLine(l.x,c,l.x,l.y),a.drawLine(l.x,l.y,h,l.y),a.fillTextCenterX("时间（年/月/日）",u,l.y+a.r(70)),a.fillTextVerticalRaw("进度（%）",l.x-a.r(50),f);for(var p=(l.y-c)/10,m=1;m<11;m++){var d=(255-25*m).toString();a.strokeStyle="rgb("+d+","+d+","+d+")";var g=l.y-m*p;a.drawLine(l.x,g,h,g,.8),a.fillTextCenter((10*m).toString()+"%",l.x-20,g)}var v=Date.parse(this.progress[0].Childs[0].Date),b=Date.parse(this.progress[0].Childs[0].Date);for(m=0;m<this.progress.length;++m)for(var k=0;k<this.progress[m].Childs.length;++k){var w=Date.parse(this.progress[m].Childs[k].Date);console.log(w),v=w<v?w:v,b=w>b?w:b}var y=Math.ceil((b-v)/864e5);this.chartProps.totalDays=y,console.log(y);var C=(b-v)/this.chartProps.XDelta,N=v,x=(h-l.x)/this.chartProps.XDelta;for(console.log(this.chartProps.XDelta,x,h),m=0;m<Number(this.chartProps.XDelta)+1;m++){var _=new Date(N),P=l.x+x*m;a.strokeStyle="rgb(80,80,80)",a.fillTextVerticalRaw(_.getFullYear().toString()+"/"+(_.getMonth()+1).toString()+"/"+_.getDate().toString(),P,l.y+a.r(50),-Math.PI/4),a.drawLine(P,l.y,P,c,.5),N+=C}console.log(m);var D=["#D2691E","#7FFFD4","#DEB887","#5F9EA0","#7FFF00","#00FFFF","#D2651E","#7F3FD4","#DE5887","#5F92A0"],I=!1,T=l.x,S=l.y;for(a.fillRect(l.x-4,l.y-4,8,8),a.fillTextCenterX(this.progress[0].Childs[0].Name,l.x-20,l.y+20),this.chartProps.nodes=[],m=0;m<this.progress.length;++m)for(a.strokeStyle=D[m],a.fillStyle=D[m],a.fillRect(l.x+20+50*m+a.getTextWidth(this.progress[m].Name),40,8,8),a.fillTextCenterX(this.progress[m].Name,l.x+20+50*m,40),k=1;k<this.progress[m].Childs.length;++k){a.strokeStyle=D[m];var R=this.progress[m].Childs[k],A=(Date.parse(R.Date)-v)/(b-v)*(h-l.x)+l.x,L=l.y-R.Percent/100*(l.y-c);this.chartProps.nodes.push({name:R.Name,x:A,y:L}),a.drawLine(A,L,T,S,3),a.strokeStyle=D[5],a.fillStyle="#000000",a.fillRect(A-4,L-4,8,8),T=A,S=L}for(m=0;m<this.chartProps.nodes.length;++m){a.strokeStyle="#808080",A=this.chartProps.nodes[m].x,L=this.chartProps.nodes[m].y;var M=this.chartProps.nodes[m].name;"退回"==M&&(I=!1);var E=a.getTextWidth(R.Name);E=0==m||m==this.chartProps.nodes.length-1?E-18:E;var U=I?L-E:L+E+10,B=I?A-E:A+E+10;a.fillTextVerticalRaw(M,B,U,this.chartProps.TagAng),a.drawLine(A,L,B,U,1),I=!I}},vaildDate:function(e){var t=Date.parse(e.Date);return!isNaN(t)},validDateNextPrev:function(e,t){var r=Date.parse(e.Date);if(0==t){var a=Date.parse(this.progress[t+1].Childs[0].Date);return!(r>a)}if(t==this.progress.length-1){var n=Date.parse(this.progress[t-1].Childs[this.progress[t-1].Childs.length-1].Date);return!(r<n)}return a=Date.parse(this.progress[t+1].Childs[0].Date),n=Date.parse(this.progress[t-1].Childs[this.progress[t-1].Childs.length-1].Date),!(r>a||r<n)},getRandomInt:function(){return Math.floor(46*Math.random())+5},changeMarkingPercent:function(e,t){for(var r=0,a=0;a<this.progress.length;++a)if(this.progress[a].Name==e.Name){for(var n=0;n<this.progress[a].Childs.length;++n){var i=this.progress[a].Childs[n];i.Name==t.Name&&(++r,i.Percent=t.Percent)}return void s["a"].Msg("修改成功","已有"+r.toString()+"项流程的进度被更新","success")}},addMarking:function(){if(""!=this.new_marking.Name&&""!=this.new_marking.ChildName){for(var e=0;e<this.example_marking.length;++e)if(this.new_marking.Name==this.example_marking[e].Name){for(var t=0;t<this.example_marking[e].Childs.length;++t)if(this.new_marking.ChildName==this.example_marking[e].Childs[t].Name)return void s["a"].Msg("添加失败","已存在该流程","danger");return console.log(this.new_marking),void this.example_marking[e].Childs.push({Name:this.new_marking.ChildName,Percent:this.new_marking.Percent})}this.example_marking.push({Name:this.new_marking.Name,Childs:[{Name:this.new_marking.ChildName,Percent:this.new_marking.Percent}]}),this.refreshSelect()}else s["a"].Msg("添加失败","流程名不可为空","danger")},delMarking:function(){for(var e=0;e<this.example_marking.length;++e)if(this.delete_marking.Name==this.example_marking[e].Name){for(var t=0;t<this.example_marking[e].Childs.length;++t)if(this.delete_marking.ChildName==this.example_marking[e].Childs[t].Name)return this.example_marking[e].Childs.splice(t,1),s["a"].Msg("删除成功",this.delete_marking.Name+" =>"+this.delete_marking.ChildName,"success"),void this.refreshSelect();break}s["a"].Msg("删除失败","无符合流程","danger")}}},f=u,p=(r("2781"),r("5d22")),m=Object(p["a"])(f,a,n,!1,null,null,null);t["default"]=m.exports},c0e8:function(e,t,r){"use strict";var a=r("14b8"),n=r("cc50"),s=r("af0d"),i=r("5b20"),o=r("533c"),l=r("08ee"),c=r("aeec"),h=r("3679"),u=r("3a32"),f=r("c1e7"),p=r("d7eb").f,m=r("c6eb").f,d=r("15b7").f,g=r("e506").trim,v="Number",b=n[v],k=b.prototype,w=l(f(k))==v,y=function(e){var t,r,a,n,s,i,o,l,c=h(e,!1);if("string"==typeof c&&c.length>2)if(c=g(c),t=c.charCodeAt(0),43===t||45===t){if(r=c.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+c}for(s=c.slice(2),i=s.length,o=0;o<i;o++)if(l=s.charCodeAt(o),l<48||l>n)return NaN;return parseInt(s,a)}return+c};if(s(v,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var C,N=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof N&&(w?u((function(){k.valueOf.call(r)})):l(r)!=v)?c(new b(y(t)),r,N):y(t)},x=a?p(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),_=0;x.length>_;_++)o(b,C=x[_])&&!o(N,C)&&d(N,C,m(b,C));N.prototype=k,k.constructor=N,i(n,v,N)}},cedf:function(e,t,r){},e506:function(e,t,r){var a=r("0766"),n=r("1fa9"),s="["+n+"]",i=RegExp("^"+s+s+"*"),o=RegExp(s+s+"*$"),l=function(e){return function(t){var r=String(a(t));return 1&e&&(r=r.replace(i,"")),2&e&&(r=r.replace(o,"")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},e5e2:function(e,t,r){"use strict";var a=r("bde0"),n=r("9670").map,s=r("5034"),i=s("map");a({target:"Array",proto:!0,forced:!i},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},e65c:function(e,t,r){"use strict";r("6bfc");var a=r("bde0"),n=r("ce33"),s=r("e972"),i=r("5b20"),o=r("fd47"),l=r("fea1"),c=r("9f65"),h=r("4183"),u=r("a14d"),f=r("533c"),p=r("ea81"),m=r("f683"),d=r("e8e0"),g=r("b0f9"),v=r("c1e7"),b=r("08ab"),k=r("12ea"),w=r("eb68"),y=r("0ebe"),C=n("fetch"),N=n("Headers"),x=y("iterator"),_="URLSearchParams",P=_+"Iterator",D=h.set,I=h.getterFor(_),T=h.getterFor(P),S=/\+/g,R=Array(4),A=function(e){return R[e-1]||(R[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},L=function(e){try{return decodeURIComponent(e)}catch(t){return e}},M=function(e){var t=e.replace(S," "),r=4;try{return decodeURIComponent(t)}catch(a){while(r)t=t.replace(A(r--),L);return t}},E=/[!'()~]|%20/g,U={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},B=function(e){return U[e]},F=function(e){return encodeURIComponent(e).replace(E,B)},$=function(e,t){if(t){var r,a,n=t.split("&"),s=0;while(s<n.length)r=n[s++],r.length&&(a=r.split("="),e.push({key:M(a.shift()),value:M(a.join("="))}))}},q=function(e){this.entries.length=0,$(this.entries,e)},z=function(e,t){if(e<t)throw TypeError("Not enough arguments")},O=c((function(e,t){D(this,{type:P,iterator:k(I(e).entries),kind:t})}),"Iterator",(function(){var e=T(this),t=e.kind,r=e.iterator.next(),a=r.value;return r.done||(r.value="keys"===t?a.key:"values"===t?a.value:[a.key,a.value]),r})),j=function(){u(this,j,_);var e,t,r,a,n,s,i,o,l,c=arguments.length>0?arguments[0]:void 0,h=this,p=[];if(D(h,{type:_,entries:p,updateURL:function(){},updateSearchParams:q}),void 0!==c)if(g(c))if(e=w(c),"function"===typeof e){t=e.call(c),r=t.next;while(!(a=r.call(t)).done){if(n=k(d(a.value)),s=n.next,(i=s.call(n)).done||(o=s.call(n)).done||!s.call(n).done)throw TypeError("Expected sequence with length 2");p.push({key:i.value+"",value:o.value+""})}}else for(l in c)f(c,l)&&p.push({key:l,value:c[l]+""});else $(p,"string"===typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},V=j.prototype;o(V,{append:function(e,t){z(arguments.length,2);var r=I(this);r.entries.push({key:e+"",value:t+""}),r.updateURL()},delete:function(e){z(arguments.length,1);var t=I(this),r=t.entries,a=e+"",n=0;while(n<r.length)r[n].key===a?r.splice(n,1):n++;t.updateURL()},get:function(e){z(arguments.length,1);for(var t=I(this).entries,r=e+"",a=0;a<t.length;a++)if(t[a].key===r)return t[a].value;return null},getAll:function(e){z(arguments.length,1);for(var t=I(this).entries,r=e+"",a=[],n=0;n<t.length;n++)t[n].key===r&&a.push(t[n].value);return a},has:function(e){z(arguments.length,1);var t=I(this).entries,r=e+"",a=0;while(a<t.length)if(t[a++].key===r)return!0;return!1},set:function(e,t){z(arguments.length,1);for(var r,a=I(this),n=a.entries,s=!1,i=e+"",o=t+"",l=0;l<n.length;l++)r=n[l],r.key===i&&(s?n.splice(l--,1):(s=!0,r.value=o));s||n.push({key:i,value:o}),a.updateURL()},sort:function(){var e,t,r,a=I(this),n=a.entries,s=n.slice();for(n.length=0,r=0;r<s.length;r++){for(e=s[r],t=0;t<r;t++)if(n[t].key>e.key){n.splice(t,0,e);break}t===r&&n.push(e)}a.updateURL()},forEach:function(e){var t,r=I(this).entries,a=p(e,arguments.length>1?arguments[1]:void 0,3),n=0;while(n<r.length)t=r[n++],a(t.value,t.key,this)},keys:function(){return new O(this,"keys")},values:function(){return new O(this,"values")},entries:function(){return new O(this,"entries")}},{enumerable:!0}),i(V,x,V.entries),i(V,"toString",(function(){var e,t=I(this).entries,r=[],a=0;while(a<t.length)e=t[a++],r.push(F(e.key)+"="+F(e.value));return r.join("&")}),{enumerable:!0}),l(j,_),a({global:!0,forced:!s},{URLSearchParams:j}),s||"function"!=typeof C||"function"!=typeof N||a({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,r,a,n=[e];return arguments.length>1&&(t=arguments[1],g(t)&&(r=t.body,m(r)===_&&(a=t.headers?new N(t.headers):new N,a.has("content-type")||a.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=v(t,{body:b(0,String(r)),headers:b(0,a)}))),n.push(t)),C.apply(this,n)}}),e.exports={URLSearchParams:j,getState:I}},e972:function(e,t,r){var a=r("3a32"),n=r("0ebe"),s=r("d7d2"),i=n("iterator");e.exports=!a((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,a){t["delete"]("b"),r+=a+e})),s&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[i]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))}}]);