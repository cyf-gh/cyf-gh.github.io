(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6115f82f"],{"1fa9":function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"69ee":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-modal",{ref:"modalCreatescr",attrs:{id:"id-modal-create-scr",title:"还剩几步完成脚本的生成"},on:{ok:e.createscr}},[a("label",{attrs:{for:"id-input-mcdr-path"}},[e._v("MCDR位于服务器的绝对路径")]),a("b-form-input",{attrs:{id:"id-input-mcdr-path",required:"",state:e.scrPathState,placeholder:"Unix路径","invalid-feedback":"不能为空","aria-describedby":"input-live-help input-live-feedback"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createscr(t)}},model:{value:e.scr.mcdrPath,callback:function(t){e.$set(e.scr,"mcdrPath",t)},expression:"scr.mcdrPath"}}),a("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[e._v(" 请输入正确的Unix路径 ")]),a("b-form-text",{attrs:{id:"id-input-mcdr-path"}},[e._v("例：~/MCDR/ MCDR是你的MCDR所在的文件夹")]),a("br"),a("b-form-checkbox",{attrs:{switch:""},model:{value:e.scr.clearOriginPlgs,callback:function(t){e.$set(e.scr,"clearOriginPlgs",t)},expression:"scr.clearOriginPlgs"}},[e._v("安装时保留原MCDR插件")]),a("b-form-text",[e._v("当保留时，更新的插件会覆盖旧的插件")]),a("hr"),a("p",[e._v("验证问题")]),a("label",{attrs:{for:"id-input-validate-cal"}},[e._v(e._s(e.validate.dig1)+" + "+e._s(e.validate.dig2)+" = ")]),a("b-form-input",{attrs:{id:"id-input-validate-cal",required:"",state:e.validateAnswer,placeholder:"小学生数学题","invalid-feedback":"答案错误","aria-describedby":"input-live-help input-live-feedback"},model:{value:e.validate.sum,callback:function(t){e.$set(e.validate,"sum",t)},expression:"validate.sum"}}),a("b-form-invalid-feedback",{attrs:{id:"id-input-validate-cal"}},[e._v(" 请输入正确的计算答案 ")])],1),a("b-sidebar",{attrs:{id:"sidebar-plg-market",title:"插件市场",shadow:""}},[a("div",{staticClass:"container",attrs:{id:"id-plg-market"}},[a("b-badge",{attrs:{variant:"info",target:"_blank",href:"https://github.com/cyf-gh/MCDRPluginCataJson"}},[e._v("我要上传插件")]),a("br"),a("hr"),a("h5",[e._v("分类")]),a("b-form-select",{ref:"select-cats",attrs:{id:"id-select-cats",options:e.feed,"value-field":"plg","text-field":"cat"},on:{change:e.selectChanged},model:{value:e.curPlgItems,callback:function(t){e.curPlgItems=t},expression:"curPlgItems"}}),a("div",[a("b-table",{ref:"selectPlgs",attrs:{id:"id-table-plgs",hover:"",items:e.curPlgItems,"current-page":e.curPage,fields:e.fields,"per-page":e.perPage,small:""},on:{"row-clicked":e.onRowSelected}})],1),a("b-pagination",{attrs:{align:"center","per-page":e.perPage,"total-rows":e.rows,"aria-controls":"id-table-plgs"},model:{value:e.curPage,callback:function(t){e.curPage=t},expression:"curPage"}})],1),a("hr"),a("b-container",[a("small",[e._v("插件源")]),a("b-form-input",{attrs:{id:"id-input-plg-feed",required:"",placeholder:"URI"},model:{value:e.feedSource,callback:function(t){e.feedSource=t},expression:"feedSource"}}),a("b-badge",{attrs:{pill:"",variant:"info",href:"#"},on:{mousedown:e.updateFeedSource}},[e._v("点击更新源")]),a("small",{staticClass:"d-block mb-3 text-muted"},[e._v("官方插件源地址："),a("br"),e._v("1："),a("br"),e._v("https://raw.githubusercontent.com/cyf-gh/MCDRPluginCataJson/master/feed.json"),a("br"),e._v("2:"),a("br"),e._v("https://se.cyf-cloud.cn:2346/v1/util/mcdr/plg/feed")]),a("b-alert",{attrs:{show:"",variant:"info"}},[a("h4",{staticClass:"alert-heading"},[e._v("使用方法")]),a("p",[e._v(" 1. 在插件市场中点击一次则会勾选该插件。点击已经选过的插件会取消对该插件的选择。 "),a("br"),e._v("2. 再选中的所有插件列表中，点击任意插件可取消对该插件的选择。 ")]),a("hr"),a("p",[e._v("uuid: "+e._s(e.uuid))])])],1)],1),a("b-card-group",[a("b-card",[a("div",{staticClass:"container text-center"},[a("br"),0==e.selectedPlgs.length?a("h1",[e._v("你还未选择任何插件")]):e._e(),e.selectedPlgs.length>0?a("h1",[e._v("已选插件列表 "),a("b-badge",[e._v(e._s(e.selectedPlgs.length)+"个插件")])],1):e._e(),a("br"),a("b-table",{ref:"selectPlgs",attrs:{striped:"",id:"id-table-plgs",hover:"",items:e.selectedPlgs,"current-page":e.curPage2,"per-page":e.perPage2,small:""},on:{"row-clicked":e.onSelectedPlgCliced}}),a("b-pagination",{attrs:{align:"center","per-page":e.perPage2,"total-rows":e.rows2,"aria-controls":"id-table-plgs"},model:{value:e.curPage2,callback:function(t){e.curPage2=t},expression:"curPage2"}}),a("b-button-group",[a("b-button",{on:{click:e.openCreatescr}},[e._v("下一步")]),a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-plg-market",modifiers:{"sidebar-plg-market":!0}}],attrs:{variant:"info"}},[e._v("打开插件市场")])],1),a("br")],1)]),a("b-card",[a("h3",{staticClass:"text-center"},[e._v("安装教程视频")]),a("b-embed",{attrs:{src:"https://player.bilibili.com/player.html?aid=669491459&cid=230645380&page=1&danmaku=0",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",width:"auto",height:"auto"}})],1)],1),""!=e.scr.src?a("b-container",[a("b-card",[a("hr"),a("b-alert",{attrs:{show:"",variant:"warning"}},[e._v("如果插件有变动则请重新生成脚本")]),a("label",[e._v("复制到终端并运行")]),a("b-form-input",{attrs:{id:"input-large",size:"lg",placeholder:"Code..."},model:{value:e.runScript,callback:function(t){e.runScript=t},expression:"runScript"}}),a("br"),a("label",[e._v("脚本")]),a("b-form-textarea",{attrs:{id:"textarea",placeholder:"Code here...",rows:"3","max-rows":"10"},model:{value:e.scr.src,callback:function(t){e.$set(e.scr,"src",t)},expression:"scr.src"}})],1)],1):e._e()],1)},s=[],i=(a("16cc"),a("29dd"),a("71d0"),a("8545"),a("86be"),a("9065"),a("c0e8"),a("3f9d")),c=a("44aa"),l=a("69a7"),n={mounted:function(){try{c["a"].InitToast(this.$bvToast),this.updateFeedSource();var e=localStorage.getItem("selectedPlgs");this.selectedPlgs=null==e?[]:JSON.parse(e),this.scr.mcdrPath=localStorage.getItem("mcdrPath"),console.log(JSON.parse(this.selectedPlgs))}catch(a){console.error(a)}var t=localStorage.getItem("mcdrplguuid");null==t&&(t=l["a"].CreateUuid().toString(),localStorage.setItem("mcdrplguuid",t)),this.uuid=t;try{this.getscr(),console.log("getscr"),this.runScript+=this.uuid+")"}catch(a){console.error(a)}},data:function(){return{feed:[],curPlgItems:[],selectedPlgs:[],curPage:1,perPage:5,curPage2:1,perPage2:7,selectMode:"multi",curCatName:"",fields:["name","desc"],feedSource:"https://se.cyf-cloud.cn:2346/v1/util/mcdr/plg/feed",view:{tCount:0},scr:{mcdrPath:"",clearOriginPlgs:!0,src:"",info:""},validate:{dig1:0,dig2:0,sum:0},uuid:"",runScript:". <(curl -s -S -L https://api.cyf-cloud.cn/v1/util/mcdr/plg/scripts?u="}},methods:{createscr:function(){var e=this;this.scrPathState?this.validateAnswer?this.axios.post(i["a"]+"/v1/util/mcdr/plg/script/generate",this.selectedPlgs,{params:{u:this.uuid,clear:this.scr.clearOriginPlgs,path:this.scr.mcdrPath}}).then((function(t){"OK"==t.data&&(c["a"].Msg("提示","成功生成脚本，请复制命令至终端继续。","success"),e.getscr())})).catch((function(e){c["a"].Msg("错误","请查看控制条","danger"),console.error(e)})):c["a"].Msg("错误","验证问题错误","danger"):c["a"].Msg("错误","路径未填写正确","danger")},getscr:function(){var e=this;this.axios.get(i["a"]+"/v1/util/mcdr/plg/scripts",{params:{u:this.uuid}}).then((function(t){console.log(t.data),e.scr.src=t.data,""==e.scr.src?c["a"].Msg("提示","你还未生成过脚本"):c["a"].Msg("提示","成功获取脚本","success")})).catch((function(e){console.error(e),c["a"].Msg("错误","获取脚本失败","danger")}))},updateFeedSource:function(){var e=this;this.axios.get(this.feedSource).then((function(t){e.feed=t.data,0==e.feed.length&&c["a"].Msg("提示","插件源中没有任何插件"),e.curPlgItems=e.feed[0].plg,c["a"].Msg("提示","插件源更新成功")})).catch((function(e){console.error(e),c["a"].Msg("提示","源获取失败，请更换源","danger")}))},selectChanged:function(){},onRowSelected:function(e){var t=this,a=!1,r=0;this.selectedPlgs.forEach((function(s){if(s.name==e.name)return t.$delete(t.selectedPlgs,r),void(a=!0);r++})),a||(this.selectedPlgs.push(e),this.saveSelectedPlg())},onSelectedPlgCliced:function(e){for(var t in this.selectedPlgs)if(this.selectedPlgs[t].name==e.name)return this.$delete(this.selectedPlgs,t),void this.saveSelectedPlg()},msg:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";this.view.tCount++,this.$bvToast.toast(t,{title:e,autoHideDelay:3e3,appendToast:!1,variant:a})},saveSelectedPlg:function(){localStorage.setItem("selectedPlgs",JSON.stringify(this.selectedPlgs))},saveMCDRPath:function(){localStorage.setItem("mcdrPath",this.scr.mcdrPath)},openCreatescr:function(){this.validate.dig1=l["a"].noncestr(!0,1,2),this.validate.dig2=l["a"].noncestr(!0,1,2),this.validate.sum=0,this.$refs["modalCreatescr"].show()}},computed:{rows:function(){return this.curPlgItems.length},rows2:function(){return this.selectedPlgs.length},scrPathState:function(){var e=new RegExp("/|(/[a-zA-Z0-9_-]+)+"),t=e.test(this.scr.mcdrPath);return e.test(this.scr.mcdrPath)&&this.saveMCDRPath(),t},validateAnswer:function(){return this.validate.sum==Number(this.validate.dig1)+Number(this.validate.dig2)}}},o=n,d=a("5d22"),u=Object(d["a"])(o,r,s,!1,null,"4e26d1c8",null);t["default"]=u.exports},c0e8:function(e,t,a){"use strict";var r=a("14b8"),s=a("cc50"),i=a("af0d"),c=a("5b20"),l=a("533c"),n=a("08ee"),o=a("aeec"),d=a("3679"),u=a("3a32"),g=a("c1e7"),h=a("d7eb").f,f=a("c6eb").f,p=a("15b7").f,v=a("e506").trim,b="Number",m=s[b],P=m.prototype,_=n(g(P))==b,S=function(e){var t,a,r,s,i,c,l,n,o=d(e,!1);if("string"==typeof o&&o.length>2)if(o=v(o),t=o.charCodeAt(0),43===t||45===t){if(a=o.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(o.charCodeAt(1)){case 66:case 98:r=2,s=49;break;case 79:case 111:r=8,s=55;break;default:return+o}for(i=o.slice(2),c=i.length,l=0;l<c;l++)if(n=i.charCodeAt(l),n<48||n>s)return NaN;return parseInt(i,r)}return+o};if(i(b,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var k,w=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof w&&(_?u((function(){P.valueOf.call(a)})):n(a)!=b)?o(new m(S(t)),a,w):S(t)},C=r?h(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),I=0;C.length>I;I++)l(m,k=C[I])&&!l(w,k)&&p(w,k,f(m,k));w.prototype=P,P.constructor=w,c(s,b,w)}},e506:function(e,t,a){var r=a("0766"),s=a("1fa9"),i="["+s+"]",c=RegExp("^"+i+i+"*"),l=RegExp(i+i+"*$"),n=function(e){return function(t){var a=String(r(t));return 1&e&&(a=a.replace(c,"")),2&e&&(a=a.replace(l,"")),a}};e.exports={start:n(1),end:n(2),trim:n(3)}}}]);